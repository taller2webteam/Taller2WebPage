<!DOCTYPE html>

<html class="" lang="es"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>IoT Dashboard - Control de Sistemas</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<!-- Tailwind removed: using pure CSS in assets/css/devices.css -->
<link rel="stylesheet" href="assets/css/devices.css"/>
<link rel="stylesheet" href="assets/css/chat.css"/>
</head>
<body>
<div class="app-root">
    <aside class="sidebar">
        <div class="flex flex-col gap-4 mb-8">
        <div class="flex items-center gap-3">
        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" data-alt="Company Logo" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCT4HRjq1HodxrZMYSxP6S_2upZugO-RNXda9jomiJJilPZKz7TXe8uyYJU_EsQc02xPiPTBFHYDu3wS-AllTQwTGEIVbXiN4XecAht_rkzx0QFLeSR0oXs3-DmP5jMyWdsSsVx8hO8QI8U8ouqQujkD0QoAoBIySf1utoFOi__LHI11QACxYRVaJrpmukp7Doj8XVrHeCYjaR_kNNPAQnqX-GvWEokXYV1sMvvlHWly0QKaOVWG08ZDn_1k2naDohO9F4QjDnjd8OQ");'></div>
        <div class="flex flex-col">
        <h1 class="text-white text-base font-medium leading-normal font-display">IoT Service</h1>
        <p class="text-[#92adc9] text-sm font-normal leading-normal font-display">Real-Time Monitoring</p>
        </div>
        </div>
        </div>
        <nav>
        <a class="sidebar-link active" href="index.html">
        <span class="material-symbols-outlined text-white text-[24px]">query_stats</span>
        <p class="text-white text-sm font-medium leading-normal font-display">Panel de Control</p>
        </a>
        <a class="sidebar-link" href="devices.html">
        <span class="material-symbols-outlined text-white text-[24px]">devices</span>
        <p class="text-white text-sm font-medium leading-normal font-display">Dispositivos</p>
        </a>
        <a class="sidebar-link" href="consumo.html">
        <span class="material-symbols-outlined text-white text-[24px]">bolt</span>
        <p class="text-white text-sm font-medium leading-normal font-display">Consumo de Luz</p>
        </a>
        <a class="sidebar-link" href="sugerencias.html">
        <span class="material-symbols-outlined text-white text-[24px]">lightbulb</span>
        <p class="text-white text-sm font-medium leading-normal font-display">Sugerencias de Consumo</p>
        </a>
        <a class="sidebar-link" href="contactanos.html">
        <span class="material-symbols-outlined text-white text-[24px]">contact_support</span>
        <p class="text-white text-sm font-medium leading-normal font-display">Contáctanos</p>
        </a>
        </nav>
        <div class="sidebar-bottom">
        <a class="sidebar-link" href="#">
        <span class="material-symbols-outlined text-white text-[24px]">help</span>
        <p class="text-white text-sm font-medium leading-normal font-display">Support</p>
        </a>
        <a class="sidebar-link" href="#">
        <span class="material-symbols-outlined text-white text-[24px]">logout</span>
        <p class="text-white text-sm font-medium leading-normal font-display">Log out</p>
        </a>
        </div>
        </aside>
<main>
<div class="layout-container flex h-full grow flex-col">
<header>
<div class="flex items-center gap-4 text-slate-800 dark:text-white">
<span class="material-symbols-outlined text-3xl text-primary">
                        data_object
                    </span>
<h2 class="text-slate-800 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]">IoT Dashboard</h2>
</div>
<div class="flex flex-1 justify-end gap-4">
<label class="hidden md:flex flex-col min-w-40 !h-10 max-w-64">
<div class="flex w-full flex-1 items-stretch rounded-lg h-full">
<div class="text-slate-400 dark:text-slate-400 flex border-none bg-slate-200 dark:bg-white/5 items-center justify-center pl-4 rounded-l-lg border-r-0">
<span class="material-symbols-outlined">search</span>
</div>
<input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-slate-800 dark:text-white focus:outline-0 focus:ring-0 border-none bg-slate-200 dark:bg-white/5 focus:border-none h-full placeholder:text-slate-400 dark:placeholder:text-slate-400 px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal" placeholder="Buscar dispositivo..." value=""/>
</div>
</label>
<div class="flex gap-2">
<button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 aspect-square bg-slate-200 dark:bg-white/5 text-slate-800 dark:text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0">
<span class="material-symbols-outlined">notifications</span>
</button>
<button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 aspect-square bg-slate-200 dark:bg-white/5 text-slate-800 dark:text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0">
<span class="material-symbols-outlined">settings</span>
</button>
</div>
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" data-alt="User avatar image" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDW39PhSayzd6KMs9tiZF9OEcd4wmp8MOPyjkTP9EzFO_Uz8rWljj_vabML0sY2LyYQG-tq3z7mTF5h72cKpdm4ALYSsgKD2IaYlD-YF8ZYO2ltBPp1IITKsSw1Sdi-9wwvvnGvHauJ1G3UubpzLmoQfB6khGeDlYLpMpz6oWtutrt-WHcK9Dh4QKtnvk_BTEAbwcdPAKaMQsrhRGHa6-LwscJJO3ASFaY6cSBci5nuohtqpCegI5-pR_f-oVly4wgH87O9Myai4rs5");'></div>
</div>
</header>
<div class="page-inner">
<div class="layout-content-container flex flex-col w-full flex-1">
<div class="page-header">
<h1 class="text-slate-800 dark:text-white text-4xl font-black leading-tight tracking-[-0.033em] min-w-72">Sistemas y Dispositivos</h1>
<div class="segmented">
<a class="segmented-tab" href="index.html">
<span>Vista General</span>
</a>
<a class="segmented-tab active" href="devices.html">
<span class="material-symbols-outlined">tune</span>
<span>Control</span>
</a>
</div>
</div>
<div class="grid grid-cols-[repeat(auto-fit,minmax(320px,1fr))] gap-6 p-4">
<!-- Configuración de Conexión -->
<div class="flex flex-col gap-4 p-5 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl shadow-sm border-2 border-blue-200 dark:border-blue-700">
<div class="flex items-center gap-3 mb-2">
<span class="material-symbols-outlined text-blue-600 dark:text-blue-400" style="font-size: 32px;">router</span>
<div>
<p class="text-slate-800 dark:text-white text-lg font-bold">Configurar Conexión</p>
<p class="text-slate-600 dark:text-slate-300 text-sm">Ingresa la IP de tu ESP32</p>
</div>
</div>
<div class="flex flex-col gap-3">
<input 
  type="text" 
  id="esp32-ip-input-devices" 
  placeholder="192.168.1.100" 
  class="w-full px-4 py-2 border-2 border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:border-blue-500 dark:bg-slate-800 dark:text-white text-base"
  value="192.168.1.100"
/>
<div class="flex gap-2">
<button 
  id="save-ip-devices-btn" 
  class="flex-1 flex items-center justify-center gap-2 h-10 px-4 bg-blue-600 text-white rounded-lg text-sm font-bold hover:bg-blue-700 transition-colors"
>
<span class="material-symbols-outlined">save</span>
<span>Guardar</span>
</button>
<button 
  id="test-connection-devices-btn" 
  class="flex items-center justify-center h-10 w-10 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
>
<span class="material-symbols-outlined">wifi_find</span>
</button>
</div>
</div>
<div id="connection-feedback-devices" style="display: none; padding: 8px 12px; border-radius: 6px; font-size: 13px; font-weight: 500;">
<!-- Feedback aquí -->
</div>
</div>

<!-- ESP32 IoT Device -->
<div class="flex flex-col gap-4 p-5 bg-white dark:bg-white/5 rounded-xl shadow-sm hover:shadow-lg hover:dark:shadow-primary/20 transition-shadow duration-300">
<div class="flex items-center justify-between">
<p class="text-slate-800 dark:text-white text-lg font-bold">ESP32 IoT Device</p>
<div class="flex items-center gap-2">
<div class="size-2.5 rounded-full bg-red-500" id="esp32-status-dot"></div>
<p class="text-slate-500 dark:text-slate-400 text-sm" id="esp32-status-text">Offline</p>
</div>
</div>
<div class="text-slate-600 dark:text-slate-300">
<p class="text-2xl font-bold" id="esp32-ip">-</p>
<p class="text-sm">Dirección IP Actual</p>
</div>
<div class="flex items-center gap-3 mt-2">
<button class="flex-1 flex items-center justify-center gap-2 h-10 px-4 bg-primary text-white rounded-lg text-sm font-bold" onclick="testESP32Connection()">
<span class="material-symbols-outlined">refresh</span>
<span>Actualizar</span>
</button>
</div>
</div>

<!-- Sensor ACS712 - Corriente -->
<div class="flex flex-col gap-4 p-5 bg-white dark:bg-white/5 rounded-xl shadow-sm hover:shadow-lg hover:dark:shadow-primary/20 transition-shadow duration-300">
<div class="flex items-center justify-between">
<p class="text-slate-800 dark:text-white text-lg font-bold">Sensor de Corriente ACS712</p>
<div class="flex items-center gap-2">
<div class="size-2.5 rounded-full bg-blue-500"></div>
<p class="text-slate-500 dark:text-slate-400 text-sm">Activo</p>
</div>
</div>
<div class="flex items-baseline gap-6 text-slate-600 dark:text-slate-300">
<div>
<p class="text-3xl font-bold" id="device-current">-- A</p>
<p class="text-sm">Corriente</p>
</div>
<div>
<p class="text-3xl font-bold" id="device-voltage">-- V</p>
<p class="text-sm">Voltaje</p>
</div>
</div>
<div class="mt-2">
<p class="text-sm text-slate-500 dark:text-slate-400">Potencia: <span class="font-bold" id="device-power">-- W</span></p>
</div>
</div>

<!-- Sensor FZ0430 - Flama -->
<div class="flex flex-col gap-4 p-5 bg-white dark:bg-white/5 rounded-xl shadow-sm hover:shadow-lg hover:dark:shadow-primary/20 transition-shadow duration-300">
<div class="flex items-center justify-between">
<p class="text-slate-800 dark:text-white text-lg font-bold">Sensor de Flama FZ0430</p>
<div class="flex items-center gap-2">
<div class="size-2.5 rounded-full bg-orange-500"></div>
<p class="text-slate-500 dark:text-slate-400 text-sm">Activo</p>
</div>
</div>
<div class="text-slate-600 dark:text-slate-300">
<p class="text-3xl font-bold" id="flame-status">--</p>
<p class="text-sm" id="flame-description">Esperando datos...</p>
</div>
<div class="mt-2">
<p class="text-sm text-slate-500 dark:text-slate-400">Valor analógico: <span class="font-bold" id="flame-analog">--</span></p>
</div>
</div>

<!-- Estado del Sistema -->
<div class="flex flex-col gap-4 p-5 bg-white dark:bg-white/5 rounded-xl shadow-sm hover:shadow-lg hover:dark:shadow-primary/20 transition-shadow duration-300">
<div class="flex items-center justify-between">
<p class="text-slate-800 dark:text-white text-lg font-bold">Estado del Sistema</p>
<div class="flex items-center gap-2">
<div class="size-2.5 rounded-full bg-purple-500"></div>
<p class="text-slate-500 dark:text-slate-400 text-sm">Información</p>
</div>
</div>
<div class="flex flex-col gap-2 text-slate-600 dark:text-slate-300 text-sm">
<div class="flex justify-between">
<span>Uptime:</span>
<span class="font-bold" id="system-uptime">--</span>
</div>
<div class="flex justify-between">
<span>Memoria libre:</span>
<span class="font-bold" id="system-heap">--</span>
</div>
<div class="flex justify-between">
<span>WiFi RSSI:</span>
<span class="font-bold" id="system-rssi">--</span>
</div>
<div class="flex justify-between">
<span>Red WiFi:</span>
<span class="font-bold" id="system-ssid">--</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</main>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var path = location.pathname.split('/').pop() || 'index.html';
  document.querySelectorAll('.sidebar a.sidebar-link').forEach(function(a) {
    var href = a.getAttribute('href');
    if (href === path) { a.classList.add('active'); }
    else { a.classList.remove('active'); }
  });
});
</script>

<!-- Chat Button -->
<button id="chatButton" class="chat-fab">
  <span class="material-symbols-outlined">chat</span>
</button>

<!-- Chat Window -->
<div id="chatWindow" class="chat-window">
  <div class="chat-header">
    <div class="flex items-center gap-2">
      <span class="material-symbols-outlined">smart_toy</span>
      <h3>Asistente Virtual</h3>
    </div>
    <button id="closeChat" class="chat-close-btn">
      <span class="material-symbols-outlined">close</span>
    </button>
  </div>
  <div id="chatMessages" class="chat-messages">
    <div class="chat-message assistant-message">
      <div class="message-avatar">
        <span class="material-symbols-outlined">smart_toy</span>
      </div>
      <div class="message-content">
        ¡Hola! Soy tu asistente virtual. ¿En qué puedo ayudarte hoy?
      </div>
    </div>
  </div>
  <div class="chat-input-container">
    <input type="text" id="chatInput" class="chat-input" placeholder="Escribe tu mensaje...">
    <button id="sendMessage" class="chat-send-btn">
      <span class="material-symbols-outlined">send</span>
    </button>
  </div>
</div>

<!-- ESP32 API Client -->
<script src="assets/js/esp32-api.js"></script>

<!-- Devices Monitor -->
<script src="assets/js/devices-monitor.js"></script>

<!-- Chat Configuration & Script -->
<script src="assets/js/chat-config.js"></script>
<script src="assets/js/chat.js"></script>
</body></html>